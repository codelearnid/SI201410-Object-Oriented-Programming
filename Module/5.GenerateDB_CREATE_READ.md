# Modul 5
# PHP lanjut

Dosen Pengampu : **Arif Wicaksono Septyanto**

**Tujuan**:
- Ketepatan dalam mengimplemen tasikan PHP dalam operasi CRUD


**Materi**:
- MySQL
- CREATE
- READ

**Referensi**:
- Programming PHP

## Belajar Singkat perintah MySQL

1. Membuat Database: Untuk membuat database baru, Anda dapat menggunakan perintah CREATE DATABASE:
   ```sql
   CREATE DATABASE nama_database;
   ```
2. Menggunakan Database: Untuk beralih ke database tertentu, gunakan perintah USE:
   ```sql
   USE nama_database;
   ```
3. Membuat Tabel: Untuk membuat tabel baru di dalam database, gunakan perintah CREATE TABLE:
   ```sql
   CREATE TABLE nama_tabel (
    kolom1 tipe_data1,
    kolom2 tipe_data2,
    ...
    );
    ```

4. Menampilkan Data: Untuk mengambil data dari tabel, gunakan perintah SELECT:
   ```sql
   SELECT * FROM nama_tabel;
   ```

   Anda juga dapat menentukan kolom tertentu yang ingin Anda ambil, misalnya:
   ```sql
   SELECT kolom1, kolom2 FROM nama_tabel;
   ```

5. Menambahkan Data: Untuk menambahkan data ke tabel, gunakan perintah INSERT INTO:
   ```sql
   INSERT INTO nama_tabel (kolom1, kolom2) VALUES (nilai1, nilai2);
   ```

6. Memperbarui Data: Untuk memperbarui data yang sudah ada di tabel, gunakan perintah UPDATE:
   ```sql
   UPDATE nama_tabel SET kolom1 = nilai1 WHERE kondisi;
   ```
7. Menghapus Data: Untuk menghapus data dari tabel, gunakan perintah DELETE:
   ```sql
   DELETE FROM nama_tabel WHERE kondisi;
   ```

8. Menghapus Tabel atau Database: Untuk menghapus tabel atau database, gunakan perintah DROP:
   ```sql
   DROP TABLE nama_tabel;
   DROP DATABASE nama_database;
   ```
9.  Mengatur Izin Pengguna: Untuk mengatur izin akses pengguna, gunakan perintah GRANT dan REVOKE.

Ini adalah perintah-perintah dasar dalam MySQL. Pastikan Anda memiliki izin yang tepat sebelum menjalankan perintah-perintah ini, terutama jika Anda bekerja di lingkungan produksi.

## Generate Database Menggunakan PHP

Membuat koneksi dengan database mysql menggunakan perintah :
```php
<?php
  // buat koneksi dengan database mysql
  $dbhost = "localhost";
  $dbuser = "admin";
  $dbpass = "admin";
  $link   = mysqli_connect($dbhost,$dbuser,$dbpass);

  //periksa koneksi, tampilkan pesan kesalahan jika gagal
  if(!$link){
    die ("Koneksi gagal: ".mysqli_connect_errno().
         " - ".mysqli_connect_error());
  }
```

**Penjelasan tiap tahapan** :
```php
  $dbhost = "localhost";
  $dbuser = "admin";
  $dbpass = "admin";
```
Ini adalah deklarasi variabel. Kode ini mendefinisikan tiga variabel: $dbhost, $dbuser, dan $dbpass. Variabel ini digunakan untuk menyimpan informasi koneksi ke database, yaitu nama host database, nama pengguna (username), dan kata sandi (password).

```php
$link   = mysqli_connect($dbhost, $dbuser, $dbpass);
```
Baris ini adalah langkah penting dalam kode. Ini adalah perintah untuk membuat koneksi ke database MySQL menggunakan fungsi mysqli_connect(). Variabel $link digunakan untuk menyimpan koneksi ini.

```php
  if(!$link){
    die ("Koneksi gagal: " . mysqli_connect_errno() .
         " - " . mysqli_connect_error());
  }
```
Ini adalah struktur kendali "if". Kode ini memeriksa apakah koneksi ke database MySQL berhasil. Jika koneksi gagal (evaluasi kondisi $link adalah false), maka die akan digunakan untuk mengakhiri skrip dan menampilkan pesan kesalahan yang berisi informasi tentang alasan kegagalan koneksi. mysqli_connect_errno() mengembalikan nomor kesalahan, dan mysqli_connect_error() mengembalikan pesan kesalahan.

## CREATE Database

```php
//buat database mahasiswa jika belum ada
  $query = "CREATE DATABASE IF NOT EXISTS crud";
  $result = mysqli_query($link, $query);

  if(!$result){
    die ("Query Error: ".mysqli_errno($link).
         " - ".mysqli_error($link));
  }
  else {
    echo "Database <b>'CRUD'</b> berhasil dibuat... <br>";
  }
```

**Penjelasan tiap tahapan** :
```php
$query = "CREATE DATABASE IF NOT EXISTS crud";
```

Baris ini mendefinisikan sebuah variabel $query. Variabel ini berisi pernyataan SQL untuk membuat database baru. Pernyataan SQL ini menggunakan sintaks `CREATE DATABASE IF NOT EXISTS` yang berarti akan mencoba membuat database "crud" jika belum ada database dengan nama yang sama.

```php
$result = mysqli_query($link, $query);
```
Ini adalah perintah untuk menjalankan pernyataan SQL yang disimpan dalam variabel $query. Fungsi `mysqli_query()` digunakan untuk menjalankan pernyataan SQL ke database yang sudah didefinisikan oleh variabel `$link`, yang merupakan koneksi database yang telah dibuat sebelumnya.

```php
if(!$result){
  die ("Query Error: " . mysqli_errno($link) .
       " - " . mysqli_error($link));
}
else {
  echo "Database <b>'CRUD'</b> berhasil dibuat... <br>";
}
```
- Ini adalah struktur kendali `"if-else"`. Kode ini memeriksa hasil dari pernyataan SQL yang dieksekusi. Jika pernyataan SQL menghasilkan kesalahan (evaluasi kondisi !$result sebagai true), maka kode akan menghentikan eksekusi dan menampilkan pesan kesalahan yang berisi nomor kesalahan dan pesan kesalahan dari MySQL menggunakan fungsi `mysqli_errno()` dan `mysqli_error()`.
- Jika pernyataan SQL berhasil dijalankan (evaluasi kondisi `!$result` sebagai `false`), maka kode akan mengeksekusi blok else, yang akan mencetak pesan sukses yang menyatakan bahwa database "CRUD" berhasil dibuat.